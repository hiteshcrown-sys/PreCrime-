import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState, useEffect } from "react";
import { motion } from "framer-motion";
import { Activity, Clock, TrendingUp, RefreshCw, Zap, Target } from "lucide-react";
import { Tabs, TabsList, TabsTrigger } from "@/components/ui/tabs";
import { Button } from "@/components/ui/button";
import KPICard from "@/components/dashboard/KPICard";
import PredictionTable from "@/components/nowcasting/PredictionTable";
export default function Nowcasting() {
    const [timeWindow, setTimeWindow] = useState("15");
    const [lastUpdate, setLastUpdate] = useState(new Date());
    const [isRefreshing, setIsRefreshing] = useState(false);
    const handleRefresh = () => {
        setIsRefreshing(true);
        setTimeout(() => {
            setLastUpdate(new Date());
            setIsRefreshing(false);
        }, 1500);
    };
    useEffect(() => {
        const interval = setInterval(() => {
            setLastUpdate(new Date());
        }, 30000);
        return () => clearInterval(interval);
    }, []);
    return (_jsxs("div", { className: "space-y-6", children: [_jsxs("div", { className: "flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4", children: [_jsxs("div", { className: "flex items-center gap-3", children: [_jsx("div", { className: "p-2 rounded-lg bg-cyan-500/20", children: _jsx(Activity, { className: "w-6 h-6 text-cyan-400" }) }), _jsxs("div", { children: [_jsx("h1", { className: "text-2xl font-bold text-white", children: "Real-Time Crime Nowcasting" }), _jsx("p", { className: "text-slate-400 text-sm", children: "Short-term predictive risk analysis" })] })] }), _jsxs("div", { className: "flex items-center gap-3", children: [_jsx(Tabs, { value: timeWindow, onValueChange: setTimeWindow, children: _jsxs(TabsList, { className: "bg-slate-800/50 border border-slate-700", children: [_jsx(TabsTrigger, { value: "15", className: "data-[state=active]:bg-cyan-500/20 data-[state=active]:text-cyan-400", children: "15 min" }), _jsx(TabsTrigger, { value: "30", className: "data-[state=active]:bg-cyan-500/20 data-[state=active]:text-cyan-400", children: "30 min" }), _jsx(TabsTrigger, { value: "60", className: "data-[state=active]:bg-cyan-500/20 data-[state=active]:text-cyan-400", children: "60 min" })] }) }), _jsxs(Button, { variant: "outline", size: "sm", onClick: handleRefresh, className: "border-slate-700 text-slate-300 hover:bg-slate-800", children: [_jsx(RefreshCw, { className: `w-4 h-4 mr-2 ${isRefreshing ? "animate-spin" : ""}` }), "Refresh"] })] })] }), _jsxs("div", { className: "flex items-center justify-between p-4 rounded-xl bg-slate-900/50 border border-slate-800", children: [_jsxs("div", { className: "flex items-center gap-6", children: [_jsxs("div", { className: "flex items-center gap-2", children: [_jsx("span", { className: "w-2 h-2 rounded-full bg-green-400 animate-pulse" }), _jsx("span", { className: "text-sm text-green-400 font-medium", children: "System Active" })] }), _jsxs("div", { className: "flex items-center gap-2 text-sm text-slate-400", children: [_jsx(Clock, { className: "w-4 h-4" }), _jsxs("span", { children: ["Last update: ", lastUpdate.toLocaleTimeString()] })] })] }), _jsxs("div", { className: "flex items-center gap-2 text-sm", children: [_jsx(Zap, { className: "w-4 h-4 text-yellow-400" }), _jsxs("span", { className: "text-slate-300", children: ["Processing ", timeWindow, "-minute forecast window"] })] })] }), _jsxs("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4", children: [_jsx(KPICard, { title: "Zones at Alert", value: "4", subtitle: "Requiring immediate attention", icon: Target, accentColor: "red" }), _jsx(KPICard, { title: "Average Risk", value: "52.8%", subtitle: "Across all monitored zones", icon: Activity, accentColor: "orange", trend: "up", trendValue: "+3.2%" }), _jsx(KPICard, { title: "Model Confidence", value: "87.4%", subtitle: "Prediction reliability", icon: TrendingUp, accentColor: "green" }), _jsx(KPICard, { title: "Active Predictions", value: "10", subtitle: "Zones being monitored", icon: Zap, accentColor: "cyan" })] }), _jsxs("div", { className: "rounded-2xl bg-slate-900/50 border border-slate-800 overflow-hidden", children: [_jsxs("div", { className: "p-4 border-b border-slate-800 flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("h3", { className: "font-semibold text-white", children: "Zone-wise Predictions" }), _jsxs("p", { className: "text-xs text-slate-500 mt-0.5", children: [timeWindow, "-minute risk forecast for all monitored zones"] })] }), _jsxs("div", { className: "flex items-center gap-4 text-xs", children: [_jsxs("span", { className: "flex items-center gap-1.5", children: [_jsx("span", { className: "w-2 h-2 rounded-full bg-red-500" }), "Alert (>80%)"] }), _jsxs("span", { className: "flex items-center gap-1.5", children: [_jsx("span", { className: "w-2 h-2 rounded-full bg-orange-500" }), "Warning (>60%)"] }), _jsxs("span", { className: "flex items-center gap-1.5", children: [_jsx("span", { className: "w-2 h-2 rounded-full bg-green-500" }), "Normal (<40%)"] })] })] }), _jsx(PredictionTable, { timeWindow: parseInt(timeWindow) })] }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [_jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, className: "p-4 rounded-xl bg-slate-900/50 border border-slate-800", children: [_jsx("p", { className: "text-xs text-slate-400 uppercase tracking-wider mb-2", children: "Model Version" }), _jsx("p", { className: "text-lg font-semibold text-white", children: "NowCast v3.2.1" }), _jsx("p", { className: "text-xs text-slate-500 mt-1", children: "Ensemble LSTM + GBM" })] }), _jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: 0.1 }, className: "p-4 rounded-xl bg-slate-900/50 border border-slate-800", children: [_jsx("p", { className: "text-xs text-slate-400 uppercase tracking-wider mb-2", children: "Training Data" }), _jsx("p", { className: "text-lg font-semibold text-white", children: "2.4M Events" }), _jsx("p", { className: "text-xs text-slate-500 mt-1", children: "Last 5 years historical data" })] }), _jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: 0.2 }, className: "p-4 rounded-xl bg-slate-900/50 border border-slate-800", children: [_jsx("p", { className: "text-xs text-slate-400 uppercase tracking-wider mb-2", children: "Accuracy (30-day)" }), _jsx("p", { className: "text-lg font-semibold text-green-400", children: "94.2%" }), _jsx("p", { className: "text-xs text-slate-500 mt-1", children: "Verified against outcomes" })] })] })] }));
}
